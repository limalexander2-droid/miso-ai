let currentQuestion = 0;
let answers = [];

const container = document.getElementById("question-container");
const answerButtons = document.getElementById("answer-buttons");
const resultContainer = document.getElementById("result");
const quizContainer = document.getElementById("quiz");

// Quiz Questions
const questions = [
  {
    question: "How hungry are you right now?",
    options: ["Just a little hungry", "Pretty hungry", "Starving", "Planning ahead"]
  },
  {
    question: "How much time do you have to eat?",
    options: ["Less than 15 minutes", "About 30 minutes", "An hour or more", "No rush"]
  },
  {
    question: "Who are you eating with?",
    options: ["Just me", "With a friend or partner", "Small group (3â€“4)", "Big group or family", "Doesnâ€™t matter"]
  },
  {
    question: "Whatâ€™s your current mood?",
    options: ["Cozy / comfort food", "Energized / healthy", "Indulgent / treat yourself", "Adventurous", "Chill / no strong cravings"]
  },
  {
    question: "Are you craving anything specific?",
    options: ["Spicy", "Sweet", "Hot and hearty", "Fresh and light", "No specific craving"]
  },
  {
    question: "Any dietary goals or restrictions?",
    options: ["Weight loss / low-cal", "Vegetarian / Vegan", "Gluten-Free", "Low-Carb / Keto", "High-Protein", "No restrictions"]
  },
  {
    question: "How much are you looking to spend?",
    options: ["Under $10", "$10â€“$20", "$20â€“$40", "Moneyâ€™s not a concern"]
  },
  {
    question: "How far are you willing to go?",
    options: ["Walking distance", "Short drive (under 10 mins)", "15â€“30 mins", "I'll go anywhere"]
  },
  {
    question: "How would you like to eat today?",
    options: ["Dine-in", "Takeout", "Delivery", "Drive-thru", "Doesnâ€™t matter"]
  },
  {
    question: "Any special occasion or vibe?",
    options: ["Just a regular meal", "Quick lunch break", "Date night", "Post-workout", "Comfort after a long day", "Celebration"]
  }
];

// Show the current question
function showQuestion() {
  resultContainer.classList.add("hidden");
  quizContainer.classList.remove("hidden");

  const question = questions[currentQuestion];
  container.innerHTML = `
    <div class="card fade-in">
      <div class="question">${question.question}</div>
    </div>
  `;
  answerButtons.innerHTML = "";

  question.options.forEach((option, index) => {
    const button = document.createElement("button");
    button.innerText = option;
    button.className = `
      bg-white text-gray-700 text-base px-5 py-3 rounded-xl shadow-sm border border-gray-200
      hover:bg-rose-100 hover:text-rose-700 transition-all duration-200 ease-out
      focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-offset-2
    `;
    button.addEventListener("click", () => selectAnswer(option));
    answerButtons.appendChild(button);
  });
}

// Handle answer selection
function selectAnswer(answer) {
  answers.push({ question: questions[currentQuestion].question, answer });
  currentQuestion++;

  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showResults();
  }
}

// Show results placeholder
function showResults() {
  quizContainer.classList.add("hidden");
  resultContainer.classList.remove("hidden");

  // For now just show answers in console
  console.log("Collected Answers:", answers);

  resultContainer.innerHTML = `
    <h2 class="text-2xl font-semibold text-rose-700 mb-2">ðŸ¥¢ Miso is cooking up some ideas...</h2>
    <p class="text-gray-600 text-base mb-4">Thanks for sharing! Weâ€™re finding the perfect spot for you.</p>
    <div class="text-left text-sm bg-white p-4 rounded-xl shadow-inner max-h-60 overflow-y-auto border border-gray-100">
      ${answers.map(a => `<p><strong>${a.question}</strong><br><span class="text-rose-600">â†’ ${a.answer}</span></p>`).join("<hr class='my-2' />")}
    </div>
  `;
}

showQuestion();
